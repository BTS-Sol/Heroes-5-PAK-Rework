Sehr gern â€“ hier kommt eine **genaue und praxisnahe ErklÃ¤rung**, wie du den **Kampfbeginn-Trigger ("CombatStart")** **in HOMM5-Scripts einbaust**, obwohl das Spiel **keine native â€OnCombatStartâ€œ-Funktion in der Lua-API** anbietet:

---

## ğŸ§  Hintergrund: Kein direkter "CombatStart"-Event

Die LUA-Script-Engine von **HOMM5 (inkl. Hammers of Fate / Tribes of the East)** bietet **keinen systemweiten `COMBAT_START_TRIGGER`** wie z.â€¯B. `NEW_DAY_TRIGGER`.

Aber du kannst **Ã¼ber Events, Regionen oder Objektinteraktionen** erkennen, **wann ein Held in einen Kampf verwickelt wird**, z.â€¯B.:

* Ein Held **berÃ¼hrt ein neutrales Monster** (OBJECT_TOUCH_TRIGGER).
* Ein Held **tritt in eine Region** (REGION_ENTER...).
* Ein Held **greift eine Stadt an** (TOWN_HERO_DEPLOY_TRIGGER).

Dort kannst du dann **manuell** deinen Kampfbeginn-Handler aufrufen.

---

## âœ… So nutzt du einen Pseudo-CombatStart:

### ğŸ” Variante A: Kampfbeginn Ã¼ber OBJECT_TOUCH_TRIGGER

**Verwende diesen Trigger**, wenn du erkennst: â€Ein Held hat ein Objekt berÃ¼hrt â†’ es folgt gleich ein Kampf.â€œ

### Beispiel:

```lua
function OnObjectTouch(heroName, objectName)
    CombatStartTrigger(heroName)
end

Trigger(OBJECT_TOUCH_TRIGGER, "OnObjectTouch")
```

Das funktioniert **z.â€¯B. bei neutralen Armeen, Arenen oder Obelisken**.

---

### ğŸ” Variante B: REGION_ENTER_AND\_STOP\_TRIGGER

Wenn du **vor einem Kampfgebiet (z.â€¯B. Golem-Wache, Bosszone)** eine **Region legst**, kannst du exakt dann den Slot-Check auslÃ¶sen:

```lua
function OnRegionEnter(heroName, regionName)
    CombatStartTrigger(heroName)
end

Trigger(REGION_ENTER_AND_STOP_TRIGGER, "OnRegionEnter")
```

Lege im Editor einfach eine unsichtbare Region auf das Feld **vor dem Kampf**, gib ihr einen Namen (z.â€¯B. `"REGION_COMBAT_PRECHECK"`) und das Script macht den Rest.

---

### ğŸ“Œ Was passiert dann?

Die Funktion `CombatStartTrigger(heroName)` aus deinem Hauptscript:

```lua
function CombatStartTrigger(heroName)
    EnforceSlotLimit(heroName) -- entfernt Ã¼berzÃ¤hlige Einheiten
end
```

...wird **direkt aufgerufen, bevor der Kampf beginnt**, sodass du den **Helden noch â€bereinigenâ€œ kannst**, bevor er mit 5+ Einheiten kÃ¤mpft.

---

## ğŸ§± EinschrÃ¤nkung

Wenn ein Held **auf der Weltkarte direkt einen Gegner angreift**, **ohne dass ein Script-gebundener Trigger feuert**, wird dein Script **nicht automatisch aktiv**. Deshalb musst du:

* **bekannte Kampfstellen mit Triggerzonen** sichern, oder
* den Mechanismus eher als **prÃ¤ventive MaÃŸnahme (z.â€¯B. per `NewDayTrigger`)** einsetzen.

---

## ğŸ’¡ Empfehlung zur Kombination

Nutze die folgende Kombination:

* `NewDayTrigger` â†’ automatische Bereinigung tÃ¤glich
* `MonitorHeroes` â†’ alle 10 Sekunden Warnung bei zu vielen Slots
* `CombatStartTrigger(hero)` â†’ **manuell aus Events oder Regionen aufrufen**, wenn du KÃ¤mpfe kontrollieren willst

---

Wenn du willst, baue ich dir gern eine Testkarte oder sende dir eine `.lua` mit einem konkreten Beispiel (Region & Touch-Trigger vor neutraler Einheit). MÃ¶chtest du das?
